<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>迷宫</title>
	<link rel="stylesheet" type="text/css" href="css/maze.css">
	<script type="text/javascript" src="js/maze/maze.js"></script>
	<script type="text/javascript" src="js/maze/maze-map.js"></script>
</head>
<body>
	<div class="box">
		<div class="maze">
			<canvas id="mazeCanvas">浏览器不支持canvas</canvas>
		</div>
		<div class="action">
			<input id="fileSelector" style="width:200px" type="file" name="file" value="导入迷宫数据">
			<div class="btn create">文件方式</div>
			<div class="btn create2">内存方式</div>
			<div class="btn solve">求解迷宫</div>
		</div>
	</div>
	<script type="text/javascript">
		var maze = new Maze('fileSelector');
		var mazeMap = new MazeMap(101,101);
		let btnCreate = document.querySelector('.create');
		let btnCreate2 = document.querySelector('.create2');
		let btnSolve = document.querySelector('.solve');
		let canvas = document.querySelector('#mazeCanvas');

		maze.bindCanvas(mazeMap.n,mazeMap.m,canvas);

		let fileInput = document.querySelector('#fileSelector')
		fileInput.onchange = (event) => {
			let files = event.target.files;
			let reader = new FileReader();
			reader.readAsText(files[0],'UTF-8');
			reader.onloadend = (target) => {
				maze.mazeText = reader.result
				maze.parse2Array();
			}
		}
		btnCreate.onclick = () => {
			maze.createMazeMap();
		}
		btnCreate2.onclick = () => {
			mazeMap.draw(canvas);
			let data = mazeMap.map;
			maze.initMazeData(mazeMap.n,mazeMap.m,data);
		}
		btnSolve.onclick = () => {
			maze.solveMaze();
		}
	</script>
</body>
</html>